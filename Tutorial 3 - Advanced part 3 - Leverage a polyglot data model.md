
# Tutorial 3 - Advanced part 13 - Leverage a polyglot data model

[Tutorial 3 - Advanced part 13 - Leverage a polyglot data model](https://community.hackolade.com/slides/slide/leverage-a-polyglot-data-model-23?fullscreen=1)

## Transcript of the video

hello everyone and welcome to part 13 of this Accolade tutorial in this tutorial we're going to be talking about something that's very very special and very very dear to our heart which is the polyglot data model we sometimes think of this as one of the pillars of the hiccolate tool set it's quite unique and quite differentiating so what do we mean with that what do we mean with a polyglot data model well it's actually a little bit special it's a little bit special because it's a common physical model that you implement across a wide number of different underlying Target physical models right so in that sense it is similar but it's also different from a logical model as we used to know it in the past we have a really nice article for you to read on that but trying to summarize it here a polyglot data model is similar to a logical data model in the sense that it is technology agnostic it's not dependent on the specifics of the implementation of the underlying Target right but we think it's actually truly technology agnostic because either it accommodates a lot of different types of data models not just relational data models right so we can generate physical schemas for a variety of different Technologies automatically and map the specifics and the specific data types of these Technologies automatically to this overarching common physical model right therefore we've implemented a couple of things that are different very different from a logical model specifically we allow for denormalization at this polyglot data model level right not not always mandatory not always desired but for specific access patterns this is really really useful and it also allows for complex data types we've talked about that before in our tutorial right nested structures object structures arrays you know those types of things are permitted in that polyglot data model it also allows for some conceptual modeling Concepts to be applied by using something we call a graph view it's a higher level representation of the business terms the business Concepts that we use in our data models and therefore very useful to bridge the gap between our Technologies and our business stakeholders we would like to remind everyone that we're not big fans of creating huge you know thousands of entities types of data models we think it's useful to apply the principles of domain-driven design in domain-driven data modeling right by breaking down complex models into smaller ones right and therefore polyglot data models have a really really useful role to play there right so it's separate from a physical model but it's related right there is a link between those physical models and the polyglot model right we are going to try to ensure consistency across all implementations by having lineage between those different models we're going to use something that is similar to external definitions right linking things together right referring from one model to another model at the model level it's important to understand however that the polyglot data model once you start using it will become the master from which all of the target models are derived right so changes are to be made at that Master Level as much as possible we will obviously try to accommodate deviations additions changes deletions and you know obviously there's nothing wrong with it if you have to do that but think twice when you do you probably want to try and maximize the number of changes at the master level at the polylot level so how do you create one how do you create a polyvelop model well um it's just another data model right so when you create a new Accolade model you can choose to say okay I'm going to do this in a polyglot way and I'm going to start with the method I'm going to create the polygot model first right that's a definite possibility but many times you will actually start from something that exists already right you start from a physical Target Model that you already have and you promote that you promote that into a polylop model right so we promote the physical data model that we have into a polygon model and then we say okay now this thing is the master and we're going to work with that Master and we're going to start deriving all kinds of other models from that Master From Here on onwards right deriving a Target data model right is something that you always have to do if you want to have the polyglot model have some kind of forward engineering you cannot forward engineer a polyglot model directly right you first have to create a derived Target model from the polygot model and then continue onwards from there right so all of those operations are taking place at the Target Model level right and you pull information from the polyglot model into the Target Model right so the Target Model is always the slave is always pulling information from the master right it's not all or nothing right so you can be quite granular in the sense that you can choose which entities which parts of the polyglop model you want to pull into your derived model and you have a lot of flexibility there right one of the things that we should mention is that we have some really interesting things that we can do when we do that derivation when we do derive a Target model from a polygon model one of the things that we can do is normalization right when we derive a relational Target model from a denormalized polyglot data model then Hackle it will say well do you want to normalize right is it something that you would want to do because we can apply the principles of normalization automatically you know the rules are clear we know how to do that we know how to go from a denormalized structure into a normalized structure automatically the reverse is very different right going from a normalized structure to a denormalized structure requires insight into the access patterns that's not always automatable right so therefore we recommend that at the Master Level we allow for denormalization and then apply normalization when and if you need it at the lower level at the physical Target level another important concept that I should explain here is the fact that you can combine multiple polyglot models together into one physical Target Model you can see this in the picture right you have the blue boxes you have the Reds circles and you have the uh green triangles all of those are at the polygon levels so those are polyglot data models and entities at the polyglot level but in the physical Target that you derive from it you can combine more than one polyglot level entity into a particular Target a or Target B right so you can really mix and match there and this is sometimes really really useful especially as we move towards Concepts like domain driven data modeling we can make adjustments minor deviations if at all possible Right like changing Properties or adding a few entities or removing a few entities that's obviously possible at the Target level um but if at all possible we would like to have those updates of the Target Model be driven by the master B driven by the polyglot model right so the polygon model changes well then those changes will be updated in the Target data model by either doing some kind of a manual refresh right there's a sync option in the Target data model or by closing and reopening the target data model and then it will ask you okay are you sure that you want to update when it does that when it asks you that question it will present you with an impact analysis you see this on the screen here it will tell you okay this is what will happen if you update this target model from the master from your from your polygot model right what is it that you want to approve what is it that you want to allow or do you potentially want to break the link right you need to be thinking uh clearly about this right so this is how you update it so with that I'm going to actually um take some time and show you a few things and then we can come back a little bit later and go over some of the reading materials all right here we go so what I've got here is a target physical model for a mongodb database I've actually reverse engineered this database from a mongodb instance that is running in their Atlas Cloud um so this is the document oriented data model right so where I've got movies I've got comments I've got users all these different things right and you can see that we're leveraging the power of the document data model right there's a nested structure here a little bit more complex than your typical relational model so what we're going to do now is we're going to convert this model we're going to promote it to a polyglot data model right that's a really easy operation I can go right here I can say Okay convert this to a polyglot model okay so here I choose how I want to handle the paths right let's just take an absolute path here for now I'm going to put this in my tutorial directory and I'm going to say okay this is the polyglot version which I had already prepared but I'll just replace it here right so over write it overwrite it and now I'm going to open this new model and then you will actually see that the polyglot data model is extremely similar to the mongodb data model obviously it would be right because it's representing the same data structure but you can see here right so this is the polygon model right and it's really looking exactly the same however there are a few things that are a little bit different here right so at the bottom you can see obviously we've got the same ER diagram right it's it's looking exactly the same but it also has a graph diagram that represents the concepts that we're dealing with in this data model at a a little bit of a higher level it's uh it's draw its inspiration from How We Do graph database modeling right entities that are connected to each other with relationships right so now we've got the mongodb model right and I've got the oligod model I'm going to shut down this one right I'm going to shut down the uh mongodb and I just have the model available here and I'll just make a change here or I'll add an attribute here to this entity to the movies entity right well just add something a new attribute I'll call this the tutorial attribute right so you can see it now right I've just added this new attribute here and I'll save this one and now remember we're dealing with the polyglop model here right now if I now go back and I open the mongodb model it's hopefully going to say well hey you want to update this because the polyglot model has actually changed right so I'll go back here and I'll grab the poly the mongodb model right that's this one this is the polygon one this is the mongodb model right so I'll open the mongodb model and it's going to say well your model contains the references to polygot definitions would you like to update them yes I would right and then it's going to show me you know the impact of the change that has happened right so here you see it right the tutorial attribute has been added to the polygon model and therefore it's now going to update the Target Model let's apply that right and now we're going to have this new attribute here in the ODB model right not just in the polyglub model hopefully that's clear now I'd like to show you something else which is that um I am going to derive a new model from the polylog model right so I'll create a postgres model now right from the and I'm going to say okay this postgres model is going to be derived from the polygon model the polyglot model that I just created which is the mongodb original model right but the polygold version of that so now what's going to happen is I'm going to get a screen where I can select which entities I want to have added to my postgres model right so I've got all of the entities that are in the polyglot model with all of their nested structures and I can say okay which ones would you like to have included here right and now I'm just not going to do everything I'm just going to get the movies in in this uh postgres model but I am going to say why don't you normalize these complex data types for me into separate entities right so this should be interesting right because we can like I said earlier you know we can automate the normalization of a denormalized structure it's much it's much harder to denormalize a normalized structure as that would depend on the access patterns but this should be possible this should be interesting right it's going to give me a normalized version as you can tell of the movies entity right so these are now flat structures right where movies are over here languages are in a separate table genres are in a separate table all of the nested structures that we used to see in the original mongodb model as well as in the political polyglot model that we converted it into are now all in this postgres model so this is how we can work with this right we can actually you can see here right the tutorial attribute is also in here because that's the one that we added to the polyglot model so this is now a another derived model from the polylop model that we created and another great way that you can leverage this polyglot data model that we've created here is by working this into for example an Avro schema right something that you can leverage with your Kafka implementation or potentially also you know something that you could use to create an API or something like that right so leverage this polyglot model that you have right here for other types of data structures not just databases but something else as well now how are we going to do that let's create an Avro schema let's create an Avro schema here which we are going to derive from that polydop model that we just looked at right so I'm going to go into my tutorial directory again and I'm going to grab the polyglot model that I have over here it's going to do exactly the same thing it's going to ask me which entities do I want to have be part of this Avro schema I'll just focus on the movies here again right and here it's going to do what I just did as well for the relational database which is it's going to give me the Avro schema for the movies entity right so I can now push this into my schema registry if I wanted to so that's another example I there's plenty of other examples that we could um come up with you can derive these models from the polyglot model really really easy and so with that I'll wrap up this part of the demo and go into the final part of our tutorial here so here we are wrapping up this uh 13th part of our tutorial reading material you know we've shown this slide a couple of times before but it's so full of fantastic material our documentation the blog the Fantastic mongodb data modeling and schema design book and of course all of the different social media activities I would also highly recommend that you try this out yourself and download the product and with that I'm going to wrap up this part of the tutorial and wish you a wonderful rest of your day