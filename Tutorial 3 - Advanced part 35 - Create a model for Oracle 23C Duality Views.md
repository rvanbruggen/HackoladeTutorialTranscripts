
# Tutorial 3 - Advanced - Create a model for Oracle 23C Duality Views

[Tutorial 3 - Advanced - Create a model for Oracle 23C Duality Views](https://community.hackolade.com/slides/slide/oracle-23c-duality-views-58?fullscreen=1)

## Transcript of the video

Today we're going to be talking about a very specific new technology that Hackolade Studio is supporting: the support of Oracle 23 C's Duality Views capability. There's is a really great introduction that Oracle has posted quite some time ago actually uh around introducing this new kind of way of working with documents inside a relational database system like Oracle they call this the document relational Duality right which is basically trying to achieve and there's a really great video about is to get the benefits of the Both Worlds right both the uh denormalized ways of working with Json documents and the normalized way of working with relational systems right both have their pros and cons and obviously what Oracle is trying to enable here is to combine the best of both worlds in the same system so that is actually what they are providing with the Json document relational Duality capability where in the relational system data is actually being stored as rows in tables this this obviously has many advantages for example uh transactional capabilities and everything else um SQL access those types of things right um so that's how you store the data but you can access the data in a different way through Json documents um this obviously delivers a lot of Simplicity to the application right because this is the power of nosql this is what application developers have grown to love in a duality view Oracle therefore tries to combine The Best of Both Worlds uh in the same system a duality view exposes the data in relational tables as Json documents the concept of this is actually not very new right this is very similar to what has been done before with object relational mappers this is something that many application developers will know as a layer that they use from their application to expose the complexity of the relational system as objects it's very different from object relational mapping in the sense that object relational mappings typically live on the client side right they typically live inside the the application that you are developing right that's where the mapping is actually happening with the um Duality views Oracle is actually bring this to the server the server the database server is going to offer the object view as a Json document as a mapping to the relational system underneath it therefore both server side and client side applications will be able to use it in haate studio we've actually developed our support for this system inside the Oracle plug-in we've adapted the Oracle plug-in to support the modeling of Duality views and yes you do still need to model you do still need to know what the data structure looks like inside these Duality views and you need to be able to document it you need to be able to govern it you need to be able to work with it in a productive way a duality view therefore is a special kind of view with properties and columns but also the capability of having nested objects of a special kind inside the view it also has a specific type of syntax right which combines a new vocabulary and a new structure that obviously our tool also needs to understand both in the forward engineering capabilities and in the reverse engineering capabilities Oracle also provides examples that you can take a look at and there's a repo that you can access where you can find some of this uh information to get yourself familiar with it the case that we would like to uh work with and we'll come back to this in the demo a little bit later on is based on a very specific use case around car racing and you will see this uh quite um immediately because obviously there are two ways of creating a model from this uh system and one way of doing that is to start from the ddl the data definition language file which is provided by Oracle and then you reverse engineer this into hack aate and you receive the relational tables and The Duality views inside your data model now you will see that it doesn't expose everything yet right the ddl actually doesn't give you any insight into what the nested structures potentially might look like inside your Duality view Podium for example it doesn't expose the structure of what the podium will look like however if we actually do the reverse engineering in the alternative Way by connecting to a database system that actually has the ddl executed and that also has some data inserted into it then we will quickly see that the system is actually a little bit more refined the podium object that we had defined in the ddl now has been inflated so to speak uh and you will actually see that the podium actually has the first runner up the second up and the winner as the different nested structures inside it both in the relational table and in The Duality view this is actually something a little bit more sophisticated our database reverse engineering will automatically detect this why because we do probabilistic sampling of the database and this will obviously also understand that the structure is more refined hack will also allow you to generate or understand or reverse engineer forward engineer the syntax the SQL Syntax for these Duality views note that there is an alternative way of doing this using graphql but this is currently not yet supported creating a duality view is super easy inside haate using tools capability uh you can just add a view indicate that it's a duality view add a few specifics and then all you need to do is first select the columns if you straight up want to import a number of columns from a root table then you can do that super easily by selecting them and then next of course you can add a nested or as we will see in a little bit later an unnested structure inside The Duality view this is how you see the heart of the power of The Duality views because it effectively represents a join structure that is being executed over the rest of the relational tables a subquery will be run and that subquery will populate the Json object that you are representing inside this Duality view right so this is super powerful you can have um the subquery is added as attributes of your Duality views both in a nested field or in an unnested field as your application might require it last but not least haate also supports the forward engineering of the model that you have designed in this way to a ddl script using the appropriate syntax using everything that you should have in order to have this implemented inside your Oracle database so with that why don't we take a look at this and we can see what this looks like inside the hack Lade studio so let's take a look let's take a look at these Oracle 23c do Val views um you should obviously take a look at our manual page right which is very elaborate lots of information over here lots of links and you will also see that there are some links here to the Oracle um developer guides and Sample repos right so I have that right here this is the developer guide and this is the repo that contains the ddl that is actually going to implement Duality views in a sample database note that this ddl is actually not just the ddl it also contains some data here at the bottom right so where you can actually insert data in insert uh over here right you can insert values into the database and play around with that so what we're going to do now is we're going to spin up our hack studio and we are going to create a new model a new model for an article database article 23c database and the first thing that we're going to do is we're going to reverse engineer from a ddl file I'm going to grab that ddl file from a directory that I've already created over here right so it's it's essentially the same uh thing that you saw earlier we're going to open this and we're going to create this as tables in the ER which is the car demo um er that we're going to be creating here let's enable our lineage capabilities and after a few seconds you will see that it will create a model for me now you will see that the model is actually containing multiple things right so we have our tables over there and we have our Duality views over there you can see that these are U located quite um uh differently you know you can see that there's the um dotted line over here you can also see that in the uh race Duality view we actually have a very simple structure here which is the blob the podium blob the podium blob doesn't give me any additional information about what this is actually going to be like you know it doesn't tell me anything about the structure of the data um and I'll show you how you can actually see more of this a little bit later on but already it's probably useful to take a look at uh the ddl that we have over here right where you will have the Duality view uh defined over there all of this is now part of our hacka model and I can edit this I can play around with this I can do multiple things here this is yet another uh Oracle model but why don't I take a look at the alternative way of creating this which is not by uh inspecting the ddl but by reverse engineering a Target right so I actually have an oracle 23c instance running inside our Azure Cloud right so I'm going to say let's reverse engineer this let's see if I have connectivity there yes I do let's connect to it and then I'll be able to select select which specific part of this Oracle database server I want to reverse engineer it's actually this one that I want um you see over here that I have drivers uh but I also have some views here so I can actually uh reverse engineer all of these tables including the views automatically and what's interesting here is that I'm not just going to have the high level structure that we saw earlier inside our ddl based data model but we're actually going to do some inspection here right we're going to do some probabilistic um inferencing where we basically create a schema for each and every one of these Json Duality views that we have inside this uh database server and we're going to have a lot more information right so over here now I see that the podium based on the sampling has actually been refined and says okay there's actually multiple pieces of data inside this Podium object so this is uh really useful right accolate is now not only giving me the high level structure but it's also giving me the detail underneath that now maybe it's useful to just show you how you can create one of these Duality views over there so let's uh do that here I'll add a view over there uh this is a test View and I'm going to indicate that this is a duality view from a particular root table let's say that this is from the uh driver table I can add some table tags here um like this and now I can start adding attributes to this uh New View that we have now it's over there let's move that over here I can say okay why don't we add a column here that we going to pick from the field list of the root table that we are linking to and now I already have these things added to my structure the last thing I'd like to show you here is how you can actually have um a little bit more of complicated um attribute added to a view like this I won't do that in this new test view but let's take a look at this one over here right where we actually have a nested structure of um attributes that has been added to this Duality view uh in our data model and what you can see over there is that this is actually something that is going to be running a subquery right and this subquery is an array subquery that is going to get data from a child table the drive race map table which we call the DRM and it is going to ensure that the the race ID of the DRM is equal to the race ID of the of the race itself right so this is actually a query that is populating this uh array and similarly over there you we have an unnested uh structure object that is going to be doing something similar it's going to pull the driver ID uh from the driver table and from the DRM mapping right so we have examples like this everywhere right so over here as well you are actually running subqueries to create nested structures inside your data model last but not least I'd like to highlight that haate obviously also generates the ddl for all of these artifacts right so this is something that you can then discuss again with your technical staff your devop staff and see how they can push this back into their life systems if appropriate right with that I'm going to wrap up this little demo and also wrap up this tutorial uh I'll leave you with some reading material both our online documentation our blog our socials and obviously download the haate studio for free it's probably the best link that I can give you uh and also I'd like to point you to a few books that have been recently published or are in the process of being published among which the DB book that was one of the first and then the for J Oracle 23c specifically you know available for pre-order at this time elastic search and there are more coming in the next couple of months with that I'm wrapping up this tutorial thank you for your attention and I wish you a wonderful rest of your day